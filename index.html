<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø¯ÙˆØ§Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© - Ù…ØªÙ‚Ø¯Ù… (Firebase Realtime)</title>
    <style>
        /* CSS ÙƒØ§Ù…Ù„ */
        
         :root {
            --main-color: #5b50a3;
            --main-dark: #3a3266;
            --secondary-color: #6c757d;
            --bg-color: #f0f2f5;
            --text-color: #333;
            --card-bg: #ffffff;
            --border-color: #e0e0e0;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        }
        
        body.dark-mode {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --card-bg: #1e1e1e;
            --border-color: #3a3a3a;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            color: var(--text-color);
        }
        
        body.dark-mode header {
            background-color: #1f1f1f;
        }
        
        body.dark-mode h2 {
            border-bottom-color: #9287cc;
            color: #9287cc;
        }
        
        body.dark-mode .stat-card {
            background-color: #2c2c2c;
        }
        
        body.dark-mode table,
        body.dark-mode th,
        body.dark-mode td {
            border-color: #3a3a3a;
        }
        
        body.dark-mode tbody tr:nth-child(even) {
            background-color: #252525;
        }
        
        body.dark-mode tbody tr:hover {
            background-color: #3a3a3a;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--bg-color);
            direction: rtl;
            text-align: right;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }
        
        main {
            max-width: 1200px;
            margin: 30px auto;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background-color: var(--main-color);
            color: white;
            border-radius: 15px 15px 0 0;
            margin: -20px -20px 20px -20px;
        }
        
        h2 {
            color: var(--main-dark);
            border-bottom: 3px solid var(--main-color);
            display: inline-block;
            padding-bottom: 5px;
            margin-top: 30px;
            margin-bottom: 20px;
            font-size: 1.8em;
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            justify-content: center;
        }
        
        .stat-card {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: background-color 0.3s, border-color 0.3s;
        }
        
        .stat-card h3 {
            color: var(--main-color);
            margin-top: 0;
        }
        
        .stat-card p {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--text-color);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th,
        td {
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        thead th {
            background-color: var(--main-color);
            color: white;
            font-weight: bold;
        }
        
        tbody tr:nth-child(even) {
            background-color: var(--bg-color);
        }
        
        tbody tr:hover {
            background-color: #ebe7ff;
        }
        
        input[type="checkbox"] {
            transform: scale(1.3);
            cursor: pointer;
            accent-color: #28a745;
        }
        
        .locked-checkbox {
            opacity: 0.5;
            cursor: not-allowed !important;
            background-color: #f7f7f7 !important;
        }
        
        body.dark-mode .locked-checkbox {
            background-color: #2c2c2c !important;
        }
        
        .status-completed {
            color: #28a745;
            font-weight: bold;
        }
        
        .status-partial {
            color: #ffc107;
            font-weight: bold;
        }
        
        .status-absent {
            color: #dc3545;
            font-weight: bold;
        }
        
        .payment-section th {
            background-color: var(--secondary-color);
        }
        
        .paid-row {
            background-color: #d4edda !important;
        }
        
        .payment-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: flex-end;
            flex-wrap: wrap;
        }
        
        .payment-input-group input,
        .payment-input-group select,
        .payment-input-group button {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        
        .payment-input-group button {
            background-color: var(--main-color);
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .payment-input-group button:hover {
            background-color: var(--main-dark);
        }
        
        .input-item {
            flex: 1 1 180px;
        }
        
        .input-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .toggle-container {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .toggle-btn {
            padding: 10px 15px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .toggle-btn:hover {
            background-color: #5a6268;
        }
        
        footer {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9em;
            color: var(--secondary-color);
        }
        
        .rights-buttons button {
            background-color: transparent;
            color: var(--main-dark);
            border: 1px solid var(--main-dark);
            padding: 8px 12px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .rights-buttons button:hover {
            background-color: var(--main-color);
            color: white;
        }
    </style>
</head>

<body>
    <header>
        <h1>ğŸ—“ï¸ Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø¯ÙˆØ§Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© ğŸ“ (Firebase Realtime)</h1>
        <p>Ù…ØªØ§Ø¨Ø¹Ø© Ø¯ÙˆØ§Ù… Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø­Ø¯ØŒ Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†ØŒ Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ØŒ ÙˆØ§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡ â€” Ù…Ø²Ø§Ù…Ù†Ø© ÙÙˆØ±ÙŠØ©</p>
    </header>

    <main>
        <div class="toggle-container">
            <button id="dark-btn" class="toggle-btn">ğŸŒ™ ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„/Ø§Ù„Ù†Ù‡Ø§Ø±</button>
        </div>

        <h2>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø¹Ø§Ù…</h2>
        <div class="dashboard">
            <div class="stat-card">
                <h3>Ø¯ÙˆØ§Ù… Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ</h3>
                <p id="monthly-attendance">0 ÙŠÙˆÙ…</p>
            </div>
            <div class="stat-card">
                <h3>Ø¯ÙˆØ§Ù… Ø§Ù„Ø³Ù†Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</h3>
                <p id="yearly-attendance">0 ÙŠÙˆÙ…</p>
            </div>
        </div>

        <section class="attendance-section">
            <h2>Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</h2>
            <table id="attendance-table">
                <thead>
                    <tr>
                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        <th>Ø§Ù„ÙŠÙˆÙ…</th>
                        <th>Ø§Ù„Ø°Ù‡Ø§Ø¨ âœ”ï¸</th>
                        <th>Ø§Ù„Ø±Ø¬ÙˆØ¹ âœ”ï¸</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <hr>

        <section class="payment-section">
            <h2>ğŸ’¸ ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</h2>
            <div class="payment-input-group">
                <div class="input-item">
                    <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹:</label>
                    <input type="date" id="payment-date">
                </div>
                <div class="input-item">
                    <label>Ø§Ù„Ø´Ù‡Ø±:</label>
                    <select id="payment-month">
            <option disabled selected>Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø±</option>
            <option>ØªØ´Ø±ÙŠÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
            <option>ÙƒØ§Ù†ÙˆÙ† Ø§Ù„Ø£ÙˆÙ„</option>
            <option>ÙƒØ§Ù†ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
            <option>Ø´Ø¨Ø§Ø·</option>
            <option>Ø¢Ø°Ø§Ø±</option>
            <option>Ù†ÙŠØ³Ø§Ù†</option>
            <option>Ø£ÙŠØ§Ø±</option>
            <option>Ø­Ø²ÙŠØ±Ø§Ù†</option>
          </select>
                </div>
                <div class="input-item">
                    <label>Ø§Ù„Ù…Ø¨Ù„Øº:</label>
                    <input type="number" id="payment-amount">
                </div>
                <button id="add-payment">Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹</button>
            </div>

            <table id="payment-table">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø´Ù‡Ø±</th>
                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                        <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>
    </main>

    <footer>
        <p>âœ”ï¸ Ù†Ø³Ø®Ø© ÙƒØ§Ù…Ù„Ø© Ù…Ø­Ø¯Ø«Ø© Ù…Ø¹ Firebase Realtime Database</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js"; import { getDatabase, ref, set, push, onValue } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js"; const app = initializeApp({ apiKey: "AIzaSyCFt-2b4p-ZNipxdREf3QsNIpovDbhwnHw",
        authDomain: "ali22-603de.firebaseapp.com", projectId: "ali22-603de", storageBucket: "ali22-603de.firebasestorage.app", messagingSenderId: "890888190886", appId: "1:890888190886:web:1cb51381769a0a20752d67", measurementId: "G-T3BYJVDD4N" }); const
        db = getDatabase(app); document.getElementById("dark-btn").onclick = () => { document.body.classList.toggle("dark-mode"); localStorage.setItem("darkMode", document.body.classList.contains("dark-mode")); }; if (localStorage.getItem("darkMode")
        === "true") document.body.classList.add("dark-mode"); const START = new Date("2025-11-16"); const END = new Date("2026-11-16"); const DAYS = ["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"]; function createTable(){ const body=document.querySelector('#attendance-table
        tbody'); let d=new Date(START); body.innerHTML=""; while(d
        <END){ if([0,1,2,3].includes(d.getDay())){ const key=d.toISOString().slice(0,10); const row=body.insertRow(); row.id="day-" +key; row.insertCell().textContent=key.replace(/-/g, '/'); row.insertCell().textContent=DAYS[d.getDay()]; row.insertCell().innerHTML=`<input
            type='checkbox' data-type='in' onchange="mark('${key}')">`; row.insertCell().innerHTML=`
            <input type='checkbox' data-type='out' onchange="mark('${key}')">`; row.insertCell().className='status-cell'; } d.setDate(d.getDate()+1); } } window.mark=function(key){ const row=document.getElementById("day-"+key); const i=row.querySelector('[data-type="in"]').checked;
            const o=row.querySelector('[data-type="out"]').checked; set(ref(db,"attendance/"+key),{in:i,out:o,time:Date.now()}); } onValue(ref(db,"attendance"),(snap)=>{ const data=snap.val()||{}; document.querySelectorAll('#attendance-table tbody tr').forEach(row=>{
            const key=row.id.replace('day-',''); const rec=data[key]||{}; row.querySelector('[data-type="in"]').checked=!!rec.in; row.querySelector('[data-type="out"]').checked=!!rec.out; const st=row.querySelector('.status-cell'); if(rec.in && rec.out){st.textContent='âœ”ï¸
            Ù…ÙƒØªÙ…Ù„';} else if(rec.in||rec.out){st.textContent='âš ï¸ Ù†ØµÙ Ø¯ÙˆØ§Ù…';} else{st.textContent='âŒ ØºÙŠØ§Ø¨';} }); }); document.getElementById("add-payment").onclick=()=>{ let d=document.getElementById("payment-date").value; let m=document.getElementById("payment-month").value;
            let a=document.getElementById("payment-amount").value; if(!d||!m||!a)return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„"); push(ref(db,"payments"),{date:d,month:m,amount:a,time:Date.now()}); document.getElementById("payment-amount").value=""; } onValue(ref(db,"payments"),(snap)=>{
            const body=document.querySelector('#payment-table tbody'); const data=snap.val()||{}; body.innerHTML=""; Object.values(data).reverse().forEach(p=>{ const r=body.insertRow(); r.insertCell().textContent=p.month; r.insertCell().textContent=p.date;
            r.insertCell().textContent=p.amount+" Ø¯.Ø¹"; r.insertCell().textContent="âœ”ï¸ ØªÙ… Ø§Ù„Ø¯ÙØ¹"; }); }); createTable(); document.getElementById("payment-date").value=new Date().toISOString().slice(0,10);
    </script>
</body>

</html>
